rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Temporary simplified rules to avoid circular dependency
    // TODO: Implement proper role-based rules after fixing the circular dependency issue
    
    // --- Rules for Collections ---

    match /users/{userId} {
      // Allow any authenticated user to read any user profile
      // This prevents the circular dependency where role functions need to read users
      allow read: if request.auth != null;
      
      // Allow authenticated users to update users (temporarily)
      // TODO: Restrict to admin only
      allow create, update, delete: if request.auth != null;
    }
    
    match /groups/{groupId} {
      // Allow any authenticated user to read and modify groups (temporarily)
      // TODO: Implement proper role restrictions
      allow read, create, update, delete: if request.auth != null;
    }
    
    match /games/{gameId} {
      // Allow any authenticated user to read and modify games (temporarily)  
      // TODO: Implement proper role restrictions
      allow read, create, update, delete: if request.auth != null;
    }
    
    match /paymentUnits/{paymentUnitId} {
      // Allow any authenticated user to read and modify payment units (temporarily)
      // TODO: Implement proper role restrictions
      allow read, create, update, delete: if request.auth != null;
    }
  }
} 